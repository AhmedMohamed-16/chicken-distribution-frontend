<div class="backup-list-container">
  <div class="header">
    <h2>Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h2>
    <button
      class="btn btn-refresh"
      (click)="refreshBackups()"
      [disabled]="loading()"
      aria-label="ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©">
      ğŸ”„ ØªØ­Ø¯ÙŠØ«
    </button>
  </div>

  <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© -->
  @if (lastBackup(); as last) {
    <div class="last-backup-info">
      <strong>Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</strong> {{ formatDateTime(last.date) }}
      <span class="file-size">({{ last.fileSizeMB }})</span>
    </div>
  } @else {
    <div class="last-backup-info">
      <strong>Ø¢Ø®Ø± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©:</strong> Ù„Ø§ ÙŠÙˆØ¬Ø¯
    </div>
  }

  <!-- Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ -->
  @if (error()) {
    <app-error-message
      [message]="error()"
      (dismiss)="dismissError()">
    </app-error-message>
  }

  <!-- Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
  @if (loading()) {
    <app-loading-spinner message="Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©..."></app-loading-spinner>
  }

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© -->
  @if (!loading() && hasBackups()) {
    <div class="table-container">
      <table class="backup-table">
        <thead>
          <tr>
            <th>Ø§Ù„Ù…Ø¹Ø±Ù</th>
            <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù</th>
            <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
            <th>Ø§Ù„Ø­Ø¬Ù…</th>
            <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
          </tr>
        </thead>
        <tbody>
          @for (backup of backups(); track backup.id) {
            <tr>
              <td>{{ backup.id }}</td>
              <td class="filename">{{ backup.filename }}</td>
              <td>{{ formatDateTime(backup.date) }}</td>
              <td>{{ backup.fileSizeMB }}</td>
              <td>
                <span class="status-badge" [class]="getStatusClass(backup.status)">
                  {{ backup.status }}
                </span>
              </td>
              <td>
                <button
                  class="btn btn-download"
                  (click)="downloadBackup(backup)"
                  [disabled]="isDownloading(backup.id) || backup.status !== 'COMPLETED'"
                  aria-label="ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©">
                  @if (isDownloading(backup.id)) {
                    <app-loading-spinner [inline]="true"></app-loading-spinner>
                  } @else {
                    ğŸ“¥ ØªØ­Ù…ÙŠÙ„
                  }
                </button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }

  <!-- Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø¨ÙŠØ§Ù†Ø§Øª -->
  @if (!loading() && !hasBackups()) {
    <div class="empty-state">
      <p class="empty-icon">ğŸ“¦</p>
      <p class="empty-text">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ø³Ø® Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©</p>
      <p class="empty-subtext">Ø£Ù†Ø´Ø¦ Ø£ÙˆÙ„ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù„Ù„Ø¨Ø¯Ø¡</p>
    </div>
  }
</div>
